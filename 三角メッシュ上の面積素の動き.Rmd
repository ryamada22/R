---
title: "閉三角形メッシュの変形"
author: "ryamada"
date: "2018年2月12日"
output: 
  html_document:
    toc: true
    toc_depth: 6
    number_section: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# 2Dの例

長さが一定の輪が変形することを考える。

その輪が複数の弧に分割されており、変形とともに、その弧の長さが変化しているとする。

これは変形した輪の弧の分割の仕方の変化の観察である。

弧の長さの変化を許さないのであれば、分割の仕方は変わらず、個々の弧の形が変わるだけである。

# 3Dの例

面積が一定の閉曲面が変形することを考える。

その閉曲面が複数の三角形に分割されており、変形とともに、その三角形の形・大きさ・面積が変化しているとする。

これは変形した閉曲面の三角形分割の仕方の変化の観察である。

## 考え方１

三角形の配位(連結バターン、三角形をノードと見たときのグラフの位相)を変えないとすると、個々の三角形の形・大きさ・面積は変わる。三角形の曲面の様相は変わるかもしれない。(ただし、三角形メッシュが形を捉えているという立場からすると、三角形は平坦とみなすのがふつうである。)
三角形間の面積のやりとりは、「隣接しているならゼロ」という考え方もありかもしれない。
それは、ボーダーの引き直しだけならコストはゼロ、という発想。非連結三角形からの運搬は、夾雑三角形を通過するだけの距離のコストがある。
三角形重心・三角形辺縁での移動の後、三角形の変形に関するコストは、線形変換か。

## 考え方２

三角形の数が十分多く、三角形の面積と形を変えないとすると(たとえば正三角形のみでメッシュを近似し、その数を変えない)、三角形の配位が変わる。三角形の曲面様相は変えずに平らな三角形を維持することができる。
このようなグラフは次数３の斉次グラフである。

## 考え方３

三角形メッシュの頂点の周囲に多角形を取る。この頂点周りの多角形は、楕球近似(２つの曲率)ができる。
閉曲面の変形とともに、三角形の配位を変えない場合、頂点周り多角形の頂点数は変わらないが、その形と面積は変わる。また、楕球近似は変わる。

# 等面積三角形の変形

```{r}
X <- matrix(rnorm(2*3),ncol=2)
X <- t(t(X)-apply(X,2,mean)) # Centralization

theta <- runif(1)*2*pi
R <- matrix(c(cos(theta),-sin(theta),sin(theta),cos(theta)),2,2)

n <- 100
max.alpha <- 2
alpha <- seq(from=1,to=max.alpha,length=n)

V1 <- V2 <- V3 <- matrix(0,n,2)

for(i in 1:length(alpha)){
  M <- diag(c(alpha[i],1/alpha[i]))
  tmp <- t(R) %*% M %*% R %*% t(X)
 V1[i,] <- tmp[,1]
 V2[i,] <- tmp[,2]
 V3[i,] <- tmp[,3]

}

xyrange <- range(c(V1,V2,V3))
plot(rbind(V1[1,],V2[1,],V3[1,],V1[1,]),xlim=xyrange,ylim=xyrange,type="l")
points(rbind(V1[n,],V2[n,],V3[n,],V1[n,]),xlim=xyrange,ylim=xyrange,type="l",col=2)

points(rbind(V1,V2,V3),pch=20,cex=0.1)

```
